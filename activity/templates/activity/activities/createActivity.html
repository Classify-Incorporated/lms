{% extends 'base.html' %}

{% block title %}
  Add Activity
{% endblock %}

{% block content %}
  <div class="content-wrapper">
    <!-- Content Header -->
    <div class="content-header">
      <div class="container-fluid">
        <h1 class="h3 mb-4 text-gray-800">Add Activity to {{ subject.subject_name }}</h1>
      </div>
    </div>

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <form method="post">
          {% csrf_token %}
          <div class="form-group">
            <label for="activity_name">Activity Name:</label>
            <input type="text" id="activity_name" name="activity_name" class="form-control" required />
          </div>

          <div class="form-group">
            <label for="activity_type">Activity Type:</label>
            <select id="activity_type" name="activity_type" class="form-control" required>
              {% for activity_type in activity_types %}
                <option value="{{ activity_type.id }}">{{ activity_type.name }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="form-group">
            <label for="term">Term:</label>
            <select id="term" name="term" class="form-control" required>
              {% for term in terms %}
                <option value="{{ term.id }}">{{ term.term_name }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="form-group">
            <label for="module">Select Module:</label>
            <select id="module" name="module" class="form-control" required>
              {% for module in modules %}
                <option value="{{ module.id }}">{{ module.file_name }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="form-check">
            <input type="checkbox" id="remedial" name="remedial" class="form-check-input" />
            <label for="remedial" class="form-check-label">Remedial Activity</label>
          </div>

          <div class="form-group" id="remedial_students_field" style="display: none;">
            <label for="remedial_students">Select Students:</label>
            <select id="remedial_students" name="remedial_students" class="form-control" multiple>
              {% for student in students %}
                <option value="{{ student.id }}">{{ student.get_full_name }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="form-group">
            <label for="start_time">Start Time:</label>
            <input type="datetime-local" id="start_time" name="start_time" class="form-control" required />
          </div>

          <div class="form-group">
            <label for="end_time">End Time:</label>
            <input type="datetime-local" id="end_time" name="end_time" class="form-control" required />
          </div>

          <div class="text-right">
            <button type="submit" class="btn btn-primary">Next</button>
            <a href="{% url 'subjectDetail' subject.id %}" class="btn btn-secondary">Back</a>
          </div>
        </form>
      </div>
    </section>
  </div>

  <script>
    document.getElementById('remedial').addEventListener('change', function () {
      var remedialStudentField = document.getElementById('remedial_students_field')
      if (this.checked) {
        remedialStudentField.style.display = 'block'
      } else {
        remedialStudentField.style.display = 'none'
      }
    })
  </script>
{% endblock %}
