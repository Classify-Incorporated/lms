<form method="post" enctype="multipart/form-data" action="{% url 'updateSubject' subject.id %}" class="needs-validation" novalidate>
  {% csrf_token %}

  <!-- Subject Name Field -->
  <div class="form-group">
    <label for="{{ form.subject_name.id_for_label }}">Subject Name</label>
    {{ form.subject_name }}
    <div class="invalid-feedback">Please provide a valid subject name.</div>
  </div>

  <!-- Subject Short Name Field -->
  <div class="form-group">
    <label for="{{ form.subject_short_name.id_for_label }}">Subject Short Name</label>
    {{ form.subject_short_name }}
    <div class="invalid-feedback">Please provide a valid subject short name.</div>
  </div>

  <!-- Custom File Input for Subject Photo -->
  <div class="form-group">
    <label for="{{ form.subject_photo.id_for_label }}">Subject Photo</label>
    <div class="custom-file">
      {{ form.subject_photo }}
      <label class="custom-file-label" for="customFile">Choose file</label>
      <div class="invalid-feedback">Please upload a valid file for the subject photo.</div>
    </div>
  </div>

  <!-- Assign Teacher Dropdown -->
  <div class="form-group">
    <label for="{{ form.assign_teacher.id_for_label }}">Assign Teacher</label>
    {{ form.assign_teacher }}
    <div class="invalid-feedback">Please assign a teacher to this subject.</div>
  </div>

  <!-- Subject Description -->
  <div class="form-group">
    {{ form.subject_description.label_tag }}
    {{ form.subject_description }}
  </div>

  <!-- Subject Code -->
  <div class="form-group">
    {{ form.subject_code.label_tag }}
    {{ form.subject_code }}
  </div>

  <!-- Schedule Start Time -->
  <div class="form-group">
    {{ form.schedule_start_time.label_tag }}
    {{ form.schedule_start_time }}
  </div>

  <!-- Schedule End Time -->
  <div class="form-group">
    {{ form.schedule_end_time.label_tag }}
    {{ form.schedule_end_time }}
  </div>

  <!-- Submit Button -->
  <button type="submit" class="btn btn-primary">Submit</button>
</form>

<script>
  // Function to dynamically update the label of the custom file input
  function updateFileLabel() {
    var input = document.querySelector('.custom-file-input')
    var fileName = input.getAttribute('data-current-file') // Get the current file name if it's set as an attribute
  
    if (fileName) {
      input.nextElementSibling.innerText = fileName // Display the current file from the database if available
    }
  
    // Add event listener to handle file selection changes
    input.addEventListener('change', function (e) {
      var selectedFileName = e.target.files[0].name
      e.target.nextElementSibling.innerText = selectedFileName // Update the label with the new file name
    })
  }
  
  // Call the function after the DOM is loaded
  document.addEventListener('DOMContentLoaded', function () {
    updateFileLabel()
  })
</script>
