{% extends 'base.html' %}
{% load static %}
{% block title %}
  Course
{% endblock %}
{% block content %}
  <h1 class="h3 mb-2 text-gray-800">Course</h1>

  <div class="card shadow mb-4">
    <div class="card-header py-3">
      <button class="btn btn-primary" id="openAddCourseModalBtn">Add Course</button>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-bordered table-striped" id="dataTable" width="100%" cellspacing="0">
          <thead>
            <tr>
              <th>Course Name</th>
            </tr>
          </thead>
          <tbody>
            {% for course in courses %}
            <tr>
              <td>
                <a href="#" class="view-course" 
                   data-course-title="{{ course.course_name }}" 
                   data-course-status="{{ course.course_status }}"
                   data-course-description="{{ course.course_description }}"
                   data-instructor1="{{ course.instructor1 }}"
                   data-instructor2="{{ course.instructor2 }}">
                   {{ course.course_name }}
                </a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Modal Structure -->
  <div id="viewCourseModal" class="custom-modal">
    <div class="custom-modal-content">
      <div class="custom-modal-header">
          <button class="close-btn" id="closeCourseModalBtn">&times;</button>
          <h5>View Course</h5>
      </div>
      <div class="custom-modal-body">
          <div class="course-faculty">
              <h2>Course Faculty</h2>
              <div class="faculty-section">
                  <div class="faculty-member">
                      <img src="{% static 'img/instructor.png' %}" alt="Instructor" class="faculty-image">
                      <div>
                          <h5 id="instructor1"></h5>
                          <p>Instructor</p>
                      </div>
                  </div>
                  <div class="faculty-member">
                      <img src="{% static 'img/instructor.png' %}" alt="Instructor" class="faculty-image">
                      <div>
                          <h5 id="instructor2"></h5>
                          <p>Instructor</p>
                      </div>
                  </div>
              </div>
          </div>

          <div class="course-details">
              <h4>Details & Actions</h4>
              <ul>
                  <li><a href="#">View everyone in your course</a></li>
                  <li><a href="#">Progress Tracking</a></li>
                  <li><a href="#">Edit display settings</a></li>
                  <li><a href="#">Mark attendance</a></li>
                  <li><a href="#">View course & institution tools</a></li>
                  <li><a href="#">Manage banks</a></li>
              </ul>
              <button class="btn btn-outline-primary btn-block">Add course schedule</button>
          </div>

          <div class="main-content">
              <div class="course-card">
                  <h5 id="courseTitle"></h5>
                  <p id="courseStatus"></p>
                  <p id="courseDescription"></p>
              </div>
              <div class="course-card" id="testDetails">
                  <h5>New Test 7/30/24</h5>
                  <p>Due date: 7/31/24, 11:59 PM</p>
                  <p>Hidden from students</p>
              </div>
              <div class="course-card" id="exemplaryCourse">
                  <h5>Exemplary Course Design</h5>
                  <p>Visible to students</p>
              </div>
          </div>
      </div>
    </div>
  </div>
  <div id="viewCourseModalBackdrop" class="custom-modal-backdrop"></div>

  <!-- Inline CSS for Modal -->

  <!-- Custom Modal Script -->
  <script>
    document.querySelectorAll('.view-course').forEach(function (element) {
      element.addEventListener('click', function (event) {
        event.preventDefault();
        var courseTitle = this.getAttribute('data-course-title');
        var courseStatus = this.getAttribute('data-course-status');
        var courseDescription = this.getAttribute('data-course-description');
        var instructor1 = this.getAttribute('data-instructor1');
        var instructor2 = this.getAttribute('data-instructor2');

        document.getElementById('courseTitle').textContent = courseTitle;
        document.getElementById('courseStatus').textContent = courseStatus;
        document.getElementById('courseDescription').textContent = courseDescription;
        document.getElementById('instructor1').textContent = instructor1;
        document.getElementById('instructor2').textContent = instructor2;
        
        document.getElementById('viewCourseModal').classList.add('show')
        document.getElementById('viewCourseModalBackdrop').classList.add('show')
      });
    });

    document.getElementById('closeCourseModalBtn').addEventListener('click', function () {
      document.getElementById('viewCourseModal').classList.remove('show')
      document.getElementById('viewCourseModalBackdrop').classList.remove('show')
    });
  </script>
  
{% endblock %}
